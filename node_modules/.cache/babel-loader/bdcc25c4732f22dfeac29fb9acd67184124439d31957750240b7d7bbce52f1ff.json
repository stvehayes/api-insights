{"ast":null,"code":"import React from 'react';\nimport { focusTrap } from '@primer/behaviors';\nimport { useProvidedRefOrCreate } from './useProvidedRefOrCreate.js';\n\n/**\n * Hook used to trap focus inside a container. Returns a ref that can be added to the container\n * that should trap focus.\n * @param settings {FocusTrapHookSettings}\n */\nfunction useFocusTrap(settings, dependencies = []) {\n  const containerRef = useProvidedRefOrCreate(settings === null || settings === void 0 ? void 0 : settings.containerRef);\n  const initialFocusRef = useProvidedRefOrCreate(settings === null || settings === void 0 ? void 0 : settings.initialFocusRef);\n  const disabled = settings === null || settings === void 0 ? void 0 : settings.disabled;\n  const abortController = React.useRef();\n  const previousFocusedElement = React.useRef(null);\n\n  // If we are enabling a focus trap and haven't already stored the previously focused element\n  // go ahead an do that so we can restore later when the trap is disabled.\n  if (!previousFocusedElement.current && !(settings !== null && settings !== void 0 && settings.disabled)) {\n    previousFocusedElement.current = document.activeElement;\n  }\n\n  // This function removes the event listeners that enable the focus trap and restores focus\n  // to the previously-focused element (if necessary).\n  function disableTrap() {\n    var _abortController$curr;\n    (_abortController$curr = abortController.current) === null || _abortController$curr === void 0 ? void 0 : _abortController$curr.abort();\n    if (settings !== null && settings !== void 0 && settings.restoreFocusOnCleanUp && previousFocusedElement.current instanceof HTMLElement) {\n      previousFocusedElement.current.focus();\n      previousFocusedElement.current = null;\n    }\n  }\n  React.useEffect(() => {\n    if (containerRef.current instanceof HTMLElement) {\n      if (!disabled) {\n        var _initialFocusRef$curr;\n        abortController.current = focusTrap(containerRef.current, (_initialFocusRef$curr = initialFocusRef.current) !== null && _initialFocusRef$curr !== void 0 ? _initialFocusRef$curr : undefined);\n        return () => {\n          disableTrap();\n        };\n      } else {\n        disableTrap();\n      }\n    }\n  },\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [containerRef, initialFocusRef, disabled, ...dependencies]);\n  return {\n    containerRef,\n    initialFocusRef\n  };\n}\nexport { useFocusTrap };","map":{"version":3,"names":["React","focusTrap","useProvidedRefOrCreate","useFocusTrap","settings","dependencies","containerRef","initialFocusRef","disabled","abortController","useRef","previousFocusedElement","current","document","activeElement","disableTrap","_abortController$curr","abort","restoreFocusOnCleanUp","HTMLElement","focus","useEffect","_initialFocusRef$curr","undefined"],"sources":["/Users/steve/Documents/repos/github/billing-usage/node_modules/@primer/react/lib-esm/hooks/useFocusTrap.js"],"sourcesContent":["import React from 'react';\nimport { focusTrap } from '@primer/behaviors';\nimport { useProvidedRefOrCreate } from './useProvidedRefOrCreate.js';\n\n/**\n * Hook used to trap focus inside a container. Returns a ref that can be added to the container\n * that should trap focus.\n * @param settings {FocusTrapHookSettings}\n */\nfunction useFocusTrap(settings, dependencies = []) {\n  const containerRef = useProvidedRefOrCreate(settings === null || settings === void 0 ? void 0 : settings.containerRef);\n  const initialFocusRef = useProvidedRefOrCreate(settings === null || settings === void 0 ? void 0 : settings.initialFocusRef);\n  const disabled = settings === null || settings === void 0 ? void 0 : settings.disabled;\n  const abortController = React.useRef();\n  const previousFocusedElement = React.useRef(null);\n\n  // If we are enabling a focus trap and haven't already stored the previously focused element\n  // go ahead an do that so we can restore later when the trap is disabled.\n  if (!previousFocusedElement.current && !(settings !== null && settings !== void 0 && settings.disabled)) {\n    previousFocusedElement.current = document.activeElement;\n  }\n\n  // This function removes the event listeners that enable the focus trap and restores focus\n  // to the previously-focused element (if necessary).\n  function disableTrap() {\n    var _abortController$curr;\n    (_abortController$curr = abortController.current) === null || _abortController$curr === void 0 ? void 0 : _abortController$curr.abort();\n    if (settings !== null && settings !== void 0 && settings.restoreFocusOnCleanUp && previousFocusedElement.current instanceof HTMLElement) {\n      previousFocusedElement.current.focus();\n      previousFocusedElement.current = null;\n    }\n  }\n  React.useEffect(() => {\n    if (containerRef.current instanceof HTMLElement) {\n      if (!disabled) {\n        var _initialFocusRef$curr;\n        abortController.current = focusTrap(containerRef.current, (_initialFocusRef$curr = initialFocusRef.current) !== null && _initialFocusRef$curr !== void 0 ? _initialFocusRef$curr : undefined);\n        return () => {\n          disableTrap();\n        };\n      } else {\n        disableTrap();\n      }\n    }\n  },\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [containerRef, initialFocusRef, disabled, ...dependencies]);\n  return {\n    containerRef,\n    initialFocusRef\n  };\n}\n\nexport { useFocusTrap };\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,mBAAmB;AAC7C,SAASC,sBAAsB,QAAQ,6BAA6B;;AAEpE;AACA;AACA;AACA;AACA;AACA,SAASC,YAAYA,CAACC,QAAQ,EAAEC,YAAY,GAAG,EAAE,EAAE;EACjD,MAAMC,YAAY,GAAGJ,sBAAsB,CAACE,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,QAAQ,CAACE,YAAY,CAAC;EACtH,MAAMC,eAAe,GAAGL,sBAAsB,CAACE,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,QAAQ,CAACG,eAAe,CAAC;EAC5H,MAAMC,QAAQ,GAAGJ,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,QAAQ,CAACI,QAAQ;EACtF,MAAMC,eAAe,GAAGT,KAAK,CAACU,MAAM,CAAC,CAAC;EACtC,MAAMC,sBAAsB,GAAGX,KAAK,CAACU,MAAM,CAAC,IAAI,CAAC;;EAEjD;EACA;EACA,IAAI,CAACC,sBAAsB,CAACC,OAAO,IAAI,EAAER,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,KAAK,CAAC,IAAIA,QAAQ,CAACI,QAAQ,CAAC,EAAE;IACvGG,sBAAsB,CAACC,OAAO,GAAGC,QAAQ,CAACC,aAAa;EACzD;;EAEA;EACA;EACA,SAASC,WAAWA,CAAA,EAAG;IACrB,IAAIC,qBAAqB;IACzB,CAACA,qBAAqB,GAAGP,eAAe,CAACG,OAAO,MAAM,IAAI,IAAII,qBAAqB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,qBAAqB,CAACC,KAAK,CAAC,CAAC;IACvI,IAAIb,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,KAAK,CAAC,IAAIA,QAAQ,CAACc,qBAAqB,IAAIP,sBAAsB,CAACC,OAAO,YAAYO,WAAW,EAAE;MACvIR,sBAAsB,CAACC,OAAO,CAACQ,KAAK,CAAC,CAAC;MACtCT,sBAAsB,CAACC,OAAO,GAAG,IAAI;IACvC;EACF;EACAZ,KAAK,CAACqB,SAAS,CAAC,MAAM;IACpB,IAAIf,YAAY,CAACM,OAAO,YAAYO,WAAW,EAAE;MAC/C,IAAI,CAACX,QAAQ,EAAE;QACb,IAAIc,qBAAqB;QACzBb,eAAe,CAACG,OAAO,GAAGX,SAAS,CAACK,YAAY,CAACM,OAAO,EAAE,CAACU,qBAAqB,GAAGf,eAAe,CAACK,OAAO,MAAM,IAAI,IAAIU,qBAAqB,KAAK,KAAK,CAAC,GAAGA,qBAAqB,GAAGC,SAAS,CAAC;QAC7L,OAAO,MAAM;UACXR,WAAW,CAAC,CAAC;QACf,CAAC;MACH,CAAC,MAAM;QACLA,WAAW,CAAC,CAAC;MACf;IACF;EACF,CAAC;EACD;EACA,CAACT,YAAY,EAAEC,eAAe,EAAEC,QAAQ,EAAE,GAAGH,YAAY,CAAC,CAAC;EAC3D,OAAO;IACLC,YAAY;IACZC;EACF,CAAC;AACH;AAEA,SAASJ,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}