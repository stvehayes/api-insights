{"ast":null,"code":"import React, { useContext, useCallback } from 'react';\nimport '@primer/behaviors/utils';\nimport { useAnchoredPosition } from '../hooks/useAnchoredPosition.js';\nimport { useRefObjectAsForwardedRef } from '../hooks/useRefObjectAsForwardedRef.js';\nimport Overlay from '../Overlay/Overlay.js';\nimport { AutocompleteContext } from './AutocompleteContext.js';\nimport VisuallyHidden from '../_VisuallyHidden.js';\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n// TODO: consider making 'aria-labelledby' required\n\nfunction AutocompleteOverlay({\n  menuAnchorRef,\n  overlayProps: oldOverlayProps,\n  children,\n  ...newOverlayProps\n}) {\n  const autocompleteContext = useContext(AutocompleteContext);\n  if (autocompleteContext === null) {\n    throw new Error('AutocompleteContext returned null values');\n  }\n  const overlayProps = {\n    ...oldOverlayProps,\n    ...newOverlayProps\n  };\n  const {\n    inputRef,\n    scrollContainerRef,\n    selectedItemLength,\n    setShowMenu,\n    showMenu = false\n  } = autocompleteContext;\n  const {\n    floatingElementRef,\n    position\n  } = useAnchoredPosition({\n    side: 'outside-bottom',\n    align: 'start',\n    anchorElementRef: menuAnchorRef ? menuAnchorRef : inputRef\n  }, [showMenu, selectedItemLength]);\n  useRefObjectAsForwardedRef(scrollContainerRef, floatingElementRef);\n  const closeOptionList = useCallback(() => {\n    setShowMenu(false);\n  }, [setShowMenu]);\n  if (typeof window === 'undefined') {\n    return null;\n  }\n  return showMenu ? /*#__PURE__*/React.createElement(Overlay, _extends({\n    returnFocusRef: inputRef,\n    preventFocusOnOpen: true,\n    onClickOutside: closeOptionList,\n    onEscape: closeOptionList,\n    ref: floatingElementRef,\n    top: position === null || position === void 0 ? void 0 : position.top,\n    left: position === null || position === void 0 ? void 0 : position.left,\n    sx: {\n      overflow: 'auto'\n    }\n  }, overlayProps), children) : /*#__PURE__*/\n  // HACK: This ensures AutocompleteMenu is still mounted when closing the menu and all of the hooks inside of it are still called.\n  // A better way to do this would be to move the hooks to AutocompleteOverlay or somewhere that won't get unmounted.\n  React.createElement(VisuallyHidden, {\n    \"aria-hidden\": \"true\"\n  }, children);\n}\nAutocompleteOverlay.displayName = 'AutocompleteOverlay';\nexport { AutocompleteOverlay as default };","map":{"version":3,"names":["React","useContext","useCallback","useAnchoredPosition","useRefObjectAsForwardedRef","Overlay","AutocompleteContext","VisuallyHidden","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","AutocompleteOverlay","menuAnchorRef","overlayProps","oldOverlayProps","children","newOverlayProps","autocompleteContext","Error","inputRef","scrollContainerRef","selectedItemLength","setShowMenu","showMenu","floatingElementRef","position","side","align","anchorElementRef","closeOptionList","window","createElement","returnFocusRef","preventFocusOnOpen","onClickOutside","onEscape","ref","top","left","sx","overflow","displayName","default"],"sources":["/Users/steve/Documents/repos/github/licensing/node_modules/@primer/react/lib-esm/Autocomplete/AutocompleteOverlay.js"],"sourcesContent":["import React, { useContext, useCallback } from 'react';\nimport '@primer/behaviors/utils';\nimport { useAnchoredPosition } from '../hooks/useAnchoredPosition.js';\nimport { useRefObjectAsForwardedRef } from '../hooks/useRefObjectAsForwardedRef.js';\nimport Overlay from '../Overlay/Overlay.js';\nimport { AutocompleteContext } from './AutocompleteContext.js';\nimport VisuallyHidden from '../_VisuallyHidden.js';\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n// TODO: consider making 'aria-labelledby' required\n\nfunction AutocompleteOverlay({\n  menuAnchorRef,\n  overlayProps: oldOverlayProps,\n  children,\n  ...newOverlayProps\n}) {\n  const autocompleteContext = useContext(AutocompleteContext);\n  if (autocompleteContext === null) {\n    throw new Error('AutocompleteContext returned null values');\n  }\n  const overlayProps = {\n    ...oldOverlayProps,\n    ...newOverlayProps\n  };\n  const {\n    inputRef,\n    scrollContainerRef,\n    selectedItemLength,\n    setShowMenu,\n    showMenu = false\n  } = autocompleteContext;\n  const {\n    floatingElementRef,\n    position\n  } = useAnchoredPosition({\n    side: 'outside-bottom',\n    align: 'start',\n    anchorElementRef: menuAnchorRef ? menuAnchorRef : inputRef\n  }, [showMenu, selectedItemLength]);\n  useRefObjectAsForwardedRef(scrollContainerRef, floatingElementRef);\n  const closeOptionList = useCallback(() => {\n    setShowMenu(false);\n  }, [setShowMenu]);\n  if (typeof window === 'undefined') {\n    return null;\n  }\n  return showMenu ? /*#__PURE__*/React.createElement(Overlay, _extends({\n    returnFocusRef: inputRef,\n    preventFocusOnOpen: true,\n    onClickOutside: closeOptionList,\n    onEscape: closeOptionList,\n    ref: floatingElementRef,\n    top: position === null || position === void 0 ? void 0 : position.top,\n    left: position === null || position === void 0 ? void 0 : position.left,\n    sx: {\n      overflow: 'auto'\n    }\n  }, overlayProps), children) :\n  /*#__PURE__*/\n  // HACK: This ensures AutocompleteMenu is still mounted when closing the menu and all of the hooks inside of it are still called.\n  // A better way to do this would be to move the hooks to AutocompleteOverlay or somewhere that won't get unmounted.\n  React.createElement(VisuallyHidden, {\n    \"aria-hidden\": \"true\"\n  }, children);\n}\nAutocompleteOverlay.displayName = 'AutocompleteOverlay';\n\nexport { AutocompleteOverlay as default };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}