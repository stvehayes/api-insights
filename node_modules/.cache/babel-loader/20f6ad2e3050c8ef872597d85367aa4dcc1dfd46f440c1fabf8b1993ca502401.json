{"ast":null,"code":"import React from 'react';\nimport { warning } from '../utils/warning.js';\n\n// slot config allows 2 options:\n// 1. Component to match, example: { leadingVisual: LeadingVisual }\n\n// 2. Component to match + a test function, example: { blockDescription: [Description, props => props.variant === 'block'] }\n\n// We don't know what the props are yet, we set them later based on slot config\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n// useful for narrowing types, third option is not possible\n\n/**\n * Extract components from `children` so we can render them in different places,\n * allowing us to implement components with SSR-compatible slot APIs.\n * Note: We can only extract direct children, not nested ones.\n */\nfunction useSlots(children, config) {\n  // Object mapping slot names to their elements\n  const slots = mapValues(config, () => undefined);\n\n  // Array of elements that are not slots\n  const rest = [];\n  const keys = Object.keys(config);\n  const values = Object.values(config);\n\n  // eslint-disable-next-line github/array-foreach\n  React.Children.forEach(children, child => {\n    if (! /*#__PURE__*/React.isValidElement(child)) {\n      rest.push(child);\n      return;\n    }\n    const index = values.findIndex(value => {\n      if (Array.isArray(value)) {\n        const [component, testFn] = value;\n        return child.type === component && testFn(child.props);\n      } else {\n        return child.type === value;\n      }\n    });\n\n    // If the child is not a slot, add it to the `rest` array\n    if (index === -1) {\n      rest.push(child);\n      return;\n    }\n    const slotKey = keys[index];\n\n    // If slot is already filled, ignore duplicates\n    if (slots[slotKey]) {\n      process.env.NODE_ENV !== \"production\" ? warning(true, `Found duplicate \"${String(slotKey)}\" slot. Only the first will be rendered.`) : void 0;\n      return;\n    }\n\n    // If the child is a slot, add it to the `slots` object\n\n    slots[slotKey] = child;\n  });\n  return [slots, rest];\n}\n\n/** Map the values of an object */\nfunction mapValues(obj, fn) {\n  return Object.keys(obj).reduce((result, key) => {\n    result[key] = fn(obj[key]);\n    return result;\n  }, {});\n}\nexport { useSlots };","map":{"version":3,"names":["React","warning","useSlots","children","config","slots","mapValues","undefined","rest","keys","Object","values","Children","forEach","child","isValidElement","push","index","findIndex","value","Array","isArray","component","testFn","type","props","slotKey","process","env","NODE_ENV","String","obj","fn","reduce","result","key"],"sources":["/Users/steve/Documents/repos/github/licensing-report/node_modules/@primer/react/lib-esm/hooks/useSlots.js"],"sourcesContent":["import React from 'react';\nimport { warning } from '../utils/warning.js';\n\n// slot config allows 2 options:\n// 1. Component to match, example: { leadingVisual: LeadingVisual }\n\n// 2. Component to match + a test function, example: { blockDescription: [Description, props => props.variant === 'block'] }\n\n// We don't know what the props are yet, we set them later based on slot config\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n// useful for narrowing types, third option is not possible\n\n/**\n * Extract components from `children` so we can render them in different places,\n * allowing us to implement components with SSR-compatible slot APIs.\n * Note: We can only extract direct children, not nested ones.\n */\nfunction useSlots(children, config) {\n  // Object mapping slot names to their elements\n  const slots = mapValues(config, () => undefined);\n\n  // Array of elements that are not slots\n  const rest = [];\n  const keys = Object.keys(config);\n  const values = Object.values(config);\n\n  // eslint-disable-next-line github/array-foreach\n  React.Children.forEach(children, child => {\n    if (! /*#__PURE__*/React.isValidElement(child)) {\n      rest.push(child);\n      return;\n    }\n    const index = values.findIndex(value => {\n      if (Array.isArray(value)) {\n        const [component, testFn] = value;\n        return child.type === component && testFn(child.props);\n      } else {\n        return child.type === value;\n      }\n    });\n\n    // If the child is not a slot, add it to the `rest` array\n    if (index === -1) {\n      rest.push(child);\n      return;\n    }\n    const slotKey = keys[index];\n\n    // If slot is already filled, ignore duplicates\n    if (slots[slotKey]) {\n      process.env.NODE_ENV !== \"production\" ? warning(true, `Found duplicate \"${String(slotKey)}\" slot. Only the first will be rendered.`) : void 0;\n      return;\n    }\n\n    // If the child is a slot, add it to the `slots` object\n\n    slots[slotKey] = child;\n  });\n  return [slots, rest];\n}\n\n/** Map the values of an object */\nfunction mapValues(obj, fn) {\n  return Object.keys(obj).reduce((result, key) => {\n    result[key] = fn(obj[key]);\n    return result;\n  }, {});\n}\n\nexport { useSlots };\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,qBAAqB;;AAE7C;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAASC,QAAQA,CAACC,QAAQ,EAAEC,MAAM,EAAE;EAClC;EACA,MAAMC,KAAK,GAAGC,SAAS,CAACF,MAAM,EAAE,MAAMG,SAAS,CAAC;;EAEhD;EACA,MAAMC,IAAI,GAAG,EAAE;EACf,MAAMC,IAAI,GAAGC,MAAM,CAACD,IAAI,CAACL,MAAM,CAAC;EAChC,MAAMO,MAAM,GAAGD,MAAM,CAACC,MAAM,CAACP,MAAM,CAAC;;EAEpC;EACAJ,KAAK,CAACY,QAAQ,CAACC,OAAO,CAACV,QAAQ,EAAEW,KAAK,IAAI;IACxC,IAAI,EAAE,aAAad,KAAK,CAACe,cAAc,CAACD,KAAK,CAAC,EAAE;MAC9CN,IAAI,CAACQ,IAAI,CAACF,KAAK,CAAC;MAChB;IACF;IACA,MAAMG,KAAK,GAAGN,MAAM,CAACO,SAAS,CAACC,KAAK,IAAI;MACtC,IAAIC,KAAK,CAACC,OAAO,CAACF,KAAK,CAAC,EAAE;QACxB,MAAM,CAACG,SAAS,EAAEC,MAAM,CAAC,GAAGJ,KAAK;QACjC,OAAOL,KAAK,CAACU,IAAI,KAAKF,SAAS,IAAIC,MAAM,CAACT,KAAK,CAACW,KAAK,CAAC;MACxD,CAAC,MAAM;QACL,OAAOX,KAAK,CAACU,IAAI,KAAKL,KAAK;MAC7B;IACF,CAAC,CAAC;;IAEF;IACA,IAAIF,KAAK,KAAK,CAAC,CAAC,EAAE;MAChBT,IAAI,CAACQ,IAAI,CAACF,KAAK,CAAC;MAChB;IACF;IACA,MAAMY,OAAO,GAAGjB,IAAI,CAACQ,KAAK,CAAC;;IAE3B;IACA,IAAIZ,KAAK,CAACqB,OAAO,CAAC,EAAE;MAClBC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,GAAG5B,OAAO,CAAC,IAAI,EAAG,oBAAmB6B,MAAM,CAACJ,OAAO,CAAE,0CAAyC,CAAC,GAAG,KAAK,CAAC;MAC7I;IACF;;IAEA;;IAEArB,KAAK,CAACqB,OAAO,CAAC,GAAGZ,KAAK;EACxB,CAAC,CAAC;EACF,OAAO,CAACT,KAAK,EAAEG,IAAI,CAAC;AACtB;;AAEA;AACA,SAASF,SAASA,CAACyB,GAAG,EAAEC,EAAE,EAAE;EAC1B,OAAOtB,MAAM,CAACD,IAAI,CAACsB,GAAG,CAAC,CAACE,MAAM,CAAC,CAACC,MAAM,EAAEC,GAAG,KAAK;IAC9CD,MAAM,CAACC,GAAG,CAAC,GAAGH,EAAE,CAACD,GAAG,CAACI,GAAG,CAAC,CAAC;IAC1B,OAAOD,MAAM;EACf,CAAC,EAAE,CAAC,CAAC,CAAC;AACR;AAEA,SAAShC,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}